###############################################################################
###############################################################################
###############################################################################

## loaduju globální proměnné --------------------------------------------------

source("global.R")


## ----------------------------------------------------------------------------

###############################################################################

## loaduju tvary --------------------------------------------------------------

source("patterns.R")


## ----------------------------------------------------------------------------

###############################################################################

## loaduju balíčky ------------------------------------------------------------

library(shiny)


## ----------------------------------------------------------------------------

###############################################################################

## ----------------------------------------------------------------------------

shinyUI(fluidPage(
  
  
  ## --------------------------------------------------------------------------
  
  #############################################################################
  
  ## zavádím busy indicator ---------------------------------------------------
  
  tagList(
    
    tags$head(
      
      tags$link(rel = "stylesheet",
                type = "text/css",
                href = "style.css"),
      
      tags$script(type = "text/javascript",
                  src = "busy.js")
      
    )
    
  ),
  
  
  div(class = "busy",
      p("Aplikace je zaneprázdněná..."),
      img(src = "busy_indicator.gif")
  ),
  
  
  ## zavádím graficky hezky vypadající header ---------------------------------
  
  div(id = "header",
      div(id = "title", "Conwayova hra života"),
      div(id = "subsubtitle",
          
          "Implementace",
          
          tags$a(
            href = "http://cs.wikipedia.org/wiki/Hra_života",
            "známého celulárního automatu",
            target = "_blank"
          ),
          
          HTML("&bull;"),
          
          "Vytvořil",
          
          tags$a(
            href = "http://www.fbmi.cvut.cz/user/stepalu2",
            "Lubomír Štěpánek",
            target = "_blank"
          )
          
      )
  ),
  
  
  ## --------------------------------------------------------------------------
  
  #############################################################################
  
  sidebarLayout(
    
    sidebarPanel(
      
      #########################################################################
      
      ## první záložka --------------------------------------------------------
      
      conditionalPanel(
        
        condition = "input.conditionedPanels == 1",
        
        selectInput(inputId = "my_pattern",
                    label = "Vyberte rozestavení buněk:",
                    choices = c("náhodné buňky" = "random_cells",
                                "blok" = "block",
                                "včelín" = "beehive",
                                "bochník" = "loaf",
                                "loď" = "boat",
                                "dvojblok" = "biblock",
                                "blikač" = "blinker",
                                "ropucha" = "toad",
                                "maják" = "beacon",
                                "pulzar" = "pulsar",
                                "křídlo" = "glider",
                                "lehká hvězdná loď" = "LWSS",
                                "Gosperovo křídlové dělo" = paste("Gosper",
                                                                  "glider",
                                                                  "gun",
                                                                  sep = "_"),
                                "R-pentomino" = "R_pentomino",
                                "žalud" = "acorn",
                                "králíci" = "rabbits",
                                "benátské rolety" = "venetian_blinds",
                                "zápalná šňůra" = "fuse"),
                    selected = 1),
        
        uiOutput(outputId = "covering_percentage_of_board"),
        
        tags$hr(),
        
        "Kliknutím spustíte nový celulární automat.",
        
        tags$br(),
        tags$br(),
        
        actionButton(inputId = "start_button",
                     label = "Start!",
                     width = 150),
        
        tags$hr(),
        
        uiOutput("my_text_origination"),
        
        tags$br(),

        uiOutput(outputId = "my_step_button_origination")
        
      ),
      
      
      ## ----------------------------------------------------------------------
      
      #########################################################################
      
      ## druhá záložka --------------------------------------------------------
      
      conditionalPanel(
        
        condition = "input.conditionedPanels == 2",
        
        HTML("<b>Diagram závislosti počtu živých buněk na čase.</b>"),
        
        tags$br(),
        tags$br(),
        
        "Diagram se týká aktuálně simulovaného celulárního automatu",
        
        "v záložce 'Simulace'."
        
      ),
      
      
      ## ----------------------------------------------------------------------
      
      #########################################################################
      
      ## třetí záložka --------------------------------------------------------
      
      conditionalPanel(
        
        condition = "input.conditionedPanels == 3",
        
        HTML("<b>Stručný úvod ke Conwayově hře života</b>")
        
      ),
      
      
      ## ----------------------------------------------------------------------
      
      #########################################################################
      
      ## čtvrtá záložka -------------------------------------------------------
      
      conditionalPanel(
        
        condition = "input.conditionedPanels == 4"
        
      ), width = 3
      
      
      ## ----------------------------------------------------------------------
      
      #########################################################################
      
      
    ),
    
    
    ## ------------------------------------------------------------------------
    
    ###########################################################################
    
    ## ------------------------------------------------------------------------
    
    mainPanel(
      
      tabsetPanel(
        
        #######################################################################
        
        ## první záložka ------------------------------------------------------
        
        tabPanel(
          title = HTML("<b>Simulace</b>"),
          plotOutput("my_printable_board"),
          value = 1
        ),
        
        
        ## --------------------------------------------------------------------
        
        #######################################################################
        
        ## druhá záložka ------------------------------------------------------
        
        tabPanel(
          title = HTML("<b>Počet živých buněk v čase</b>"),
          plotOutput("number_of_alive_cells_vs_time"),
          value = 2
        ),
        
        
        ## --------------------------------------------------------------------
        
        #######################################################################
        
        ## třetí záložka ------------------------------------------------------
        
        tabPanel(
          title = HTML("<b>O Conwayově hře života</b>"),
          value = 3
        ),
        
        
        ## --------------------------------------------------------------------
        
        #######################################################################
        
        ## třetí záložka ------------------------------------------------------
        
        tabPanel(
          title = HTML("<b>O aplikaci</b>"),
          value = 4
        ),
        
        
        ## --------------------------------------------------------------------
        
        #######################################################################
        
        ## --------------------------------------------------------------------
        
        id = "conditionedPanels"
        
        
        ## --------------------------------------------------------------------
        
      ), width = 9
      
    )
    
    )
  
))


## ----------------------------------------------------------------------------

###############################################################################
###############################################################################
###############################################################################


